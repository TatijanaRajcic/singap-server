(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{22:function(e,t,a){},40:function(e,t,a){e.exports=a(78)},62:function(e,t,a){},72:function(e,t,a){},73:function(e,t,a){},74:function(e,t,a){},75:function(e,t,a){},76:function(e,t,a){},77:function(e,t,a){},78:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(16),s=a.n(l),c=a(6),o=a(4),i=a(5),m=a(8),u=a(7),h=a(18),p=a.n(h),d=p.a.create({baseURL:"https://rentalseum.herokuapp.com",withCredentials:!0});function g(e){if(e.response.data)throw console.log(e.response&&e.response.data),e;throw e}var E=function(e){return d.post("/api/auth/signup",e).then((function(e){return e.data})).catch(g)},f=function(e){return d.post("/api/auth/signin",e).then((function(e){return e.data})).catch(g)},b=function(){return d.get("/api/auth/isLoggedIn").then((function(e){return e.data})).catch(g)},v=function(){return d.get("/api/auth/logout").then((function(e){return e.data})).catch(g)},N=function(){return d.get("/api/houses").then((function(e){return e.data})).catch(g)},y=function(e){return d.get("/api/houses",{params:{search:e}}).then((function(e){return e.data})).catch(g)},C=r.a.createContext(),L=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={user:null,isLoggedIn:!1,isLoading:!0},e.setUser=function(t){e.setState({user:t,isLoggedIn:!0})},e.removeUser=function(){e.setState({user:null,isLoggedIn:!1})},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;b().then((function(t){e.setState({user:t,isLoggedIn:!0,isLoading:!1})})).catch((function(t){console.log(t),e.setState({user:null,isLoggedIn:!1,isLoading:!1})}))}},{key:"render",value:function(){var e={user:this.state.user,setUser:this.setUser,removeUser:this.removeUser,isLoggedIn:this.state.isLoggedIn,isLoading:this.state.isLoading};return r.a.createElement(C.Provider,{value:e},this.props.children)}}]),a}(n.Component),S=a(1),j=function(e){return function(t){return r.a.createElement(C.Consumer,null,(function(a){return r.a.createElement(e,Object.assign({},t,{authContext:a}))}))}},O=(a(62),j((function(e){var t=e.authContext;return r.a.createElement("nav",{className:"NavMain"},r.a.createElement(c.c,{exact:!0,to:"/"},r.a.createElement("h3",{className:"logo"},"Rentalseum")),r.a.createElement("ul",null,t.isLoggedIn&&r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,r.a.createElement(c.c,{to:"/house/create"},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},r.a.createElement("path",{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"})),"Add House Review")),r.a.createElement("li",null,r.a.createElement(c.c,{to:"/profile"},t.user&&t.user.firstName)),r.a.createElement("li",null,r.a.createElement("p",{onClick:function(){v().then((function(){t.removeUser()})).catch((function(e){console.log(e)}))}},"Logout"))),!t.isLoggedIn&&r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,r.a.createElement(c.c,{to:"/signin"},"Log in")),r.a.createElement("li",null,r.a.createElement(c.c,{to:"/signup"},"Create account")))))}))),w=a(19),k=a(17),x=(a(72),function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={search:"",results:[],isLoading:!1},n.handleSearchChange=n.handleSearchChange.bind(Object(k.a)(n)),n}return Object(i.a)(a,[{key:"handleSearchChange",value:function(e){var t=this;this.setState({search:e.target.value,isLoading:!0}),clearTimeout(this.timeoutId),this.timeoutId=setTimeout((function(){t.performSearch()}),1e3)}},{key:"performSearch",value:function(){var e=this;""!==this.state.search?p.a.get("https://developers.onemap.sg/commonapi/search?searchVal=".concat(this.state.search,"&returnGeom=Y&getAddrDetails=Y&pageNum=1")).then((function(t){console.log(t),e.setState({results:t.data.results,isLoading:!1})})):this.setState({results:[],isLoading:!1})}},{key:"handleItemClicked",value:function(e){this.setState({search:e.ADDRESS,results:[]}),this.props.onSelect(e)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"LocationAutoComplete"},r.a.createElement("input",{className:"input",type:"text",value:this.state.search,onChange:this.handleSearchChange,placeholder:"Enter an address in Singapore"}),r.a.createElement("ul",{className:"LocationAutoComplete-results"},this.state.results.map((function(t){return r.a.createElement("li",{key:t.X,className:"LocationAutoComplete-items",onClick:function(){return e.handleItemClicked(t)}},t.ADDRESS)})),this.state.isLoading&&r.a.createElement("li",{className:"LocationAutoComplete-items"},"Loading...")))}}]),a}(n.Component)),D=(a(73),new Image(40,20));D.src="images/house.png";var I=Object(w.c)({accessToken:"pk.eyJ1IjoidGF0aWphbmEiLCJhIjoiY2tkNjJtbmlxMDZoaTJxc2MyMmZhZDJzaCJ9.qP-nTy1IG3dDjZbwDIpHPQ"}),A=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={searchedPlace:null,allPlaces:[],searchDone:!1,showDetails:!1},e.mapCenter=[103.851959,1.29027],e.handlePlace=function(t){var a=[Number(t.LONGITUDE),Number(t.LATITUDE)];e.state.allPlaces.find((function(t){return e.arraysEqual(t.coordinates,a)}))?e.setState({searchedPlace:t,searchDone:!0,showDetails:!0}):e.setState({searchedPlace:"",searchDone:!0,showDetails:!1})},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;N().then((function(t){e.setState({allPlaces:t})})).catch((function(e){console.log(e)}))}},{key:"arraysEqual",value:function(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var a=0;a<e.length;++a)if(e[a]!==t[a])return!1;return!0}},{key:"render",value:function(){return r.a.createElement("div",{className:"Home"},r.a.createElement(I,{style:"mapbox://styles/mapbox/streets-v8",containerStyle:{height:"100vh",width:"70vw"},center:this.mapCenter},r.a.createElement(w.b,{type:"symbol",id:"marker",images:["my-marker",D],layout:{"icon-image":"my-marker"}},this.state.searchedPlace&&r.a.createElement(w.a,{coordinates:[Number(this.state.searchedPlace.LONGITUDE),Number(this.state.searchedPlace.LATITUDE)]}))),r.a.createElement("div",{className:"map-result"},r.a.createElement(x,{searchType:"",onSelect:this.handlePlace,mapCenter:this.mapCenter}),r.a.createElement("div",null,this.state.searchDone&&this.state.showDetails&&r.a.createElement("h1",null,"This home is registered on our website."),this.state.searchDone&&!this.state.showDetails&&r.a.createElement("h1",null,"This home is not registered on our website."))))}}]),a}(n.Component),P=a(13),T=(a(22),function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={},e.handleChange=function(t){var a=t.target.name,n="file"===t.target.type?t.target.files[0]:"checkbox"===t.target.type?t.target.checked:t.target.value;e.setState(Object(P.a)({},a,n))},e.handleSubmit=function(t){t.preventDefault();var a=e.props.authContext;f(e.state).then((function(t){a.setUser(t),e.props.history.push("/")})).catch((function(e){console.log(e)}))},e}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("section",{className:"form-section"},r.a.createElement("header",{className:"header"},r.a.createElement("h1",null,"Welcome back"," ",r.a.createElement("span",{role:"img","aria-label":"heart"},"\ud83d\udc99"))),r.a.createElement("form",{autoComplete:"off",className:"form",onChange:this.handleChange,onSubmit:this.handleSubmit},r.a.createElement("h2",{className:"title"},"Login"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"label",htmlFor:"email"},"Email"),r.a.createElement("input",{className:"input",id:"email",type:"email",name:"email"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"label",htmlFor:"password"},"Password"),r.a.createElement("input",{className:"input",id:"password",type:"password",name:"password"})),r.a.createElement("button",{className:"btn-submit"},"Let's go!")),r.a.createElement("div",{className:"form-section-bottom"},r.a.createElement("p",null,"Already have an account? "),r.a.createElement(c.b,{className:"link",to:"/signup"},"Register")))}}]),a}(n.Component)),U=Object(S.g)(j(T)),F=function(e){return r.a.createElement(U,null)},R=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={},e.handleChange=function(t){var a="file"===t.target.type?t.target.files[0]:t.target.value,n=t.target.name;e.setState(Object(P.a)({},n,a))},e.handleSubmit=function(t){t.preventDefault();var a=e.props.authContext;E(e.state).then((function(t){a.setUser(t),e.props.history.push("/")})).catch((function(e){console.log(e)}))},e}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("section",{className:"form-section"},r.a.createElement("header",{className:"header"},r.a.createElement("h1",null,"Hello",r.a.createElement("span",{role:"img","aria-label":"hand"},"\ud83d\udc4b"))),r.a.createElement("form",{autoComplete:"off",className:"form",onChange:this.handleChange,onSubmit:this.handleSubmit},r.a.createElement("h2",{className:"title"},"Create account"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"label",htmlFor:"firstName"},"First name"),r.a.createElement("input",{className:"input",id:"firstName",type:"text",name:"firstName"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"label",htmlFor:"lastName"},"Last Name"),r.a.createElement("input",{className:"input",id:"lastName",type:"text",name:"lastName"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"label",htmlFor:"email"},"Email"),r.a.createElement("input",{className:"input",id:"email",type:"email",name:"email"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"label",htmlFor:"password"},"Password"),r.a.createElement("input",{className:"input",id:"password",type:"password",name:"password"})),r.a.createElement("button",{className:"btn-submit"},"Let's go!")),r.a.createElement("div",{className:"form-section-bottom"},r.a.createElement("p",null,"Already have an account? "),r.a.createElement(c.b,{className:"link",to:"/signin"},"Log in")))}}]),a}(n.Component),H=Object(S.g)(j(R)),J=function(e){return r.a.createElement(H,null)},M=a(39),G=j((function(e){var t=e.component,a=e.authContext,n=Object(M.a)(e,["component","authContext"]);return a.isLoading?null:a.isLoggedIn?r.a.createElement(S.b,Object.assign({},n,{render:function(e){return r.a.createElement(t,e)}})):r.a.createElement(S.a,{to:"/signin"})})),z=(a(74),a(75),j(function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.authContext.user;return r.a.createElement("div",{style:{padding:"100px",fontSize:"1.25rem"}},r.a.createElement("h2",{style:{fontSize:"1.5rem",marginBottom:"10px"}},"This is profile, it's protected !"),r.a.createElement("p",null,"Checkout the",r.a.createElement("b",null,"ProtectedRoute")," component in",r.a.createElement("code",null,"./components/ProtectRoute.jsx")),r.a.createElement("a",{style:{color:"dodgerblue",fontWeight:"bold"},target:"_blank",rel:"noopener noreferrer",href:"https://reacttraining.com/react-router/web/example/auth-workflow"},"React router dom Demo of a protected route"),r.a.createElement("section",{className:"Profile"},r.a.createElement("div",{className:"user-image round-image"},r.a.createElement("img",{src:e.profileImg,alt:e.firstName})),r.a.createElement("div",{className:"user-presentation"},r.a.createElement("h2",null,e.firstName," ",e.lastName),r.a.createElement(c.b,{className:"link",to:"/profile/settings"},"Edit profile")),r.a.createElement("div",{className:"user-contact"},r.a.createElement("h4",null,"Add a phone number"),r.a.createElement("form",{className:"form"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"label",htmlFor:"phoneNumber"},"Phone number"),r.a.createElement("input",{className:"input",id:"phoneNumber",type:"text",name:"phoneNumber",placeholder:"Add phone number"})),r.a.createElement("button",{className:"form__button"},"Add phone number"))),r.a.createElement("div",{className:"CardItem"},r.a.createElement("div",{className:"item-empty"},r.a.createElement("div",{className:"round-image"},r.a.createElement("img",{src:"/media/personal-page-empty-state.svg",alt:""})),r.a.createElement("p",null,"You don't have any items :("))),r.a.createElement("div",{className:"CardItem"},r.a.createElement("h3",null,"Your items"),r.a.createElement("div",{className:"item"},r.a.createElement("div",{className:"round-image"},r.a.createElement("img",{src:"https://vignette.wikia.nocookie.net/simpsons/images/1/14/Ralph_Wiggum.png/revision/latest/top-crop/width/360/height/360?cb=20100704163100",alt:"item"})),r.a.createElement("div",{className:"description"},r.a.createElement("h2",null,"Name of item"),r.a.createElement("h4",null,"Quantity: 1 "),r.a.createElement("p",null,"Description of the item"),r.a.createElement("div",{className:"buttons"},r.a.createElement("span",null,r.a.createElement("button",{className:"btn-secondary"},"Delete")),r.a.createElement("span",null,r.a.createElement("button",{className:"btn-primary"},"Edit"))))))))}}]),a}(n.Component))),_=a(38),B=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={fullAddress:"",blocNumber:"",textAddress:"",building:"",category:"",unitNumbers1:"",unitNumbers2:"",coordinates:[]},e.mapCenter=[103.851959,1.29027],e.handleChange=function(t){if(t.target.name){var a=t.target.name;t.target.name;var n=t.target,r=n.value,l=n.maxLength,s=r.slice(0,l);e.setState(Object(P.a)({},a,s))}},e.handleSubmit=function(t){t.preventDefault();var a=Object(_.a)({},e.state);a.unitNumbers="#".concat(e.state.unitNumbers1,"-").concat(e.state.unitNumbers2),y(a).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)}))},e.handlePlace=function(t){e.setState({fullAddress:t.ADDRESS,blocNumber:t.BLK_NO,textAddress:t.ROAD_NAME,building:t.BUILDING,coordinates:[Number(t.LONGITUDE),Number(t.LATITUDE)]})},e}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"ItemForm-container"},r.a.createElement("form",{className:"form",onChange:this.handleChange,onSubmit:this.handleSubmit},r.a.createElement("h2",{className:"title"},"Detailed information about the location"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"label",htmlFor:"location"},"Postal code or address"),r.a.createElement(x,{searchType:"types=postcode&",onSelect:this.handlePlace,mapCenter:this.mapCenter})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"label",htmlFor:"unit-numbers"},"Unit numbers"),r.a.createElement("div",{id:"unit-numbers"},r.a.createElement("span",null,"#"),r.a.createElement("input",{className:"input",type:"text",name:"unitNumbers1",value:this.state.unitNumbers1,onChange:this.handleChange,placeholder:"15",maxLength:"2"}),r.a.createElement("span",null,"-"),r.a.createElement("input",{className:"input",type:"text",name:"unitNumbers2",value:this.state.unitNumbers2,onChange:this.handleChange,placeholder:"369",maxLength:"3"}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"label",htmlFor:"category"},"House category"),r.a.createElement("select",{id:"category",name:"category",defaultValue:"-1"},r.a.createElement("option",{value:"-1",disabled:!0},"Select a category"),r.a.createElement("option",{value:"Condo"},"Condo"),r.a.createElement("option",{value:"House"},"House"),r.a.createElement("option",{value:"Social Housing"},"Social Housing"))),r.a.createElement("button",{className:"btn-submit"},"Next")))}}]),a}(n.Component);var Y=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(O,null),r.a.createElement(S.d,null,r.a.createElement(S.b,{exact:!0,path:"/",component:A}),r.a.createElement(S.b,{exact:!0,path:"/signin",component:F}),r.a.createElement(S.b,{exact:!0,path:"/signup",component:J}),r.a.createElement(S.b,{exact:!0,path:"/house/create",component:B}),r.a.createElement(G,{exact:!0,path:"/profile",component:z})))};a(76),a(77);s.a.render(r.a.createElement(c.a,null,r.a.createElement(L,null,r.a.createElement(Y,null))),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.1e7feadd.chunk.js.map